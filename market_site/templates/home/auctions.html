{% extends "layout.html" %}
{% block meta_tags %}
	<link rel="stylesheet" href="{{url_for('static', filename='css/table.css')}}">
{% endblock %}
{% block style %}
<style>
    img[asset_image] {
        display: inline-block;
        width: auto;
        height: 4em;
    }

    span.gray {
        color: #414141;
    }

    span.small {
        font-size: small;
    }
    
    .container {
        display: inline-grid;
        grid-template-columns: max-content max-content;
        border: 1px solid #c0c0c0;
        background-color: #c0c0c0;
        grid-gap: 1px;
    }

    .asset_item {
        display: flex;
        flex-direction: row;
        padding: 0.5em;
        gap: 0.5em;
        background-color: #fff;
    }
</style>
{% endblock %}
{% block content %}
<table tb>
    <tr>
        <th>Image</th>
		<th>Status</th>
        <th>Item name</th>
        <th>Seller</th>
        <th>Buyer</th>
        <th>Start</th>
        <th>End</th>
        <th>Initial price</th>
        <th>Final price</th>
    </tr>
    {% for auction in auctions %}
    <tr>
        <td>
            <a href="/hard_asset/asset/{{ auction.hard_asset.id }}">
                <img asset_image src="/static/hard_assets/{{ auction.hard_asset.get_images()[0] }}" alt="{{ auction.hard_asset.name }} image">
            </a>
        </td>
		<td>
			{% if auction.status %}
				<span class="status true">IN PROGRESS</span>
			{% else %}
				<span class="status true">FINNISHED</span>
			{% endif %}
		</td>
        <td><a href="/hard_asset/asset/{{ auction.hard_asset.id }}">{{ auction.hard_asset.name }}</a></td>
		<td>
			{% set seller = auction.get_seller() %}
			{% if seller %}
				<a href="/user/{{seller.id}}">{{ seller.username }}</a>
			{% else %}
				/
			{% endif %}
		</td>
		<td>
			{% set buyers = auction.get_buyer()%}
			{% if buyers %}
				<a href="/user/{{buyers.id}}">{{ buyers.username }}</a>
			{% else %}
				/
			{% endif %}
		</td>
        <td><span class="t">{{ auction.start.strftime('%d/%m/%Y %H:%M:%S') }}</span></td>
        <td><span class="t">{{ auction.end.strftime('%d/%m/%Y %H:%M:%S') }}</span></td>

        <td><span class="m">{{ "{:,.2f}".format(auction.initial_price) }}</span></td>
        <td><span class="m">{{ "{:,.2f}".format(auction.final_price) }}</span></td>
    </tr>
    {% endfor %}
</table>
{% endblock %}